var Emot=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,i(e,t,"get"))}function n(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,i(e,t,"set"),n),n}function i(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function a(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function r(e,t,n){o(e,t),t.set(e,n)}function s(e,t){o(e,t),t.add(e)}function c(e,t){var n=document.createElement(e);return t&&(n.className=t),n}var l=new WeakMap,p=new WeakMap,d=new WeakMap,u=new WeakSet,h=new WeakSet,m=new WeakSet,f=new WeakSet,g=new WeakSet;function v(){var e=this;for(var i in t(e,l).emotMaps){if("text"!==t(e,l).emotMaps[i].type){var o=t(e,l).emotMaps[i].items;n(e,d,Object.assign(t(e,d),o))}}a(e,h,x).call(e),t(e,l).target.oninput=function(){t(e,p).content=this.value,a(e,m,b).call(e)}}function x(){var e=this,n=c("div","emot"),i=t(e,l).emotMaps,o=c("div","emot-packages"),r=function(r){var s=i[r],d=c("ul","emot-items");d.emotKey=r,n.appendChild(d);var u=function(n){var i=s.items[n],o=c("li","emot-item");if(d.appendChild(o),o.onclick=function(){var o=t(e,l).target.selectionStart,r=t(e,l).target.selectionEnd,c=t(e,p).content,d=c.substring(0,o),u=c.substring(r);"text"===s.type?t(e,p).content=d+i+u:t(e,p).content=d+"["+n+"]"+u,t(e,l).target.focus(),t(e,l).target.value=t(e,p).content,t(e,l).target.selectionEnd=u?t(e,p).content.indexOf(u):t(e,p).content.length,a(e,m,b).call(e)},"text"===s.type){var r=c("span");r.title=n,r.textContent=i,o.appendChild(r)}else{var u=c("img");u.src=i,u.title=u.alt=n,o.appendChild(u)}};for(var h in s.items)u(h);var f=c("span");f.innerHTML=r,f.onclick=function(){o.childNodes.forEach((function(e){e.className=""})),f.className="emot-package-active",n.querySelectorAll(".emot-items").forEach((function(e){e.classList.remove("emot-items-active"),e.emotKey===r&&e.classList.add("emot-items-active")}))},o.appendChild(f)};for(var s in i)r(s);n.childNodes[0].classList.add("emot-items-active"),o.childNodes[0].classList.add("emot-package-active"),n.appendChild(o),t(e,l).el.appendChild(n)}function b(){var e=t(this,p).content,n=[];e.replace(/\[(.*?)\]/g,(function(e,t){n.push(t)}));for(var i=0,a=n;i<a.length;i++){var o=a[i],r=t(this,d)[o];if(r){var s="<img src="+r+" alt="+o+"/>";e=e.replace("["+o+"]",s)}}t(this,p).contentHTML=e}function w(){var e=c("style");e.textContent=".emot{top:30px;width:100%;margin-top:10px;border:1px solid rgba(128,128,128,0.2);border-radius:4px;background:#fff;}.emot-items{display:none;height:180px;min-height:100px;max-height:200px;resize:vertical;padding:10px;margin:0;font-size:0;overflow-x:hidden;user-select:none;}.emot-items-active{display:block;}.emot-item{list-style-type:none;padding:5px 10px;border-radius:5px;display:inline-block;font-size:12px;line-height:14px;margin:0 10px 12px 0;cursor:pointer;transition:0.3s;}.emot-item img{width:32px;height:auto;}.emot-item:hover{background:rgba(128,128,128,0.2);box-shadow:0 2px 2px 0 rgb(0 0 0 / 14%),0 3px 1px -2px rgb(0 0 0 / 20%),0 1px 5px 0 rgb(0 0 0 / 12%);}.emot-packages{padding:0;font-size:0;border-top:solid 1px rgba(128,128,128,0.2);}.emot-packages span{display:inline-block;line-height:30px;font-size:14px;padding:0 10px;cursor:pointer;}.emot-packages:nth-child(1){border-radius:0 0 0 3px;}.emot-packages span img{width:20px;position:relative;top:5px;}.emot-package-active{background:rgba(128,128,128,0.2);}",document.head.appendChild(e)}function y(e){var n=this;if(!/\.json$/.test(e))return a(this,u,v).call(this);var i=new XMLHttpRequest;i.open("GET",e,!0),i.send(),i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300?(t(n,p).emotMaps=t(n,l).emotMaps=JSON.parse(i.responseText),a(n,u,v).call(n)):console.error("Emotion request failure:",i))}}return function(){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),s(this,g),s(this,f),s(this,m),s(this,h),s(this,u),r(this,l,{writable:!0,value:void 0}),r(this,p,{writable:!0,value:void 0}),r(this,d,{writable:!0,value:void 0}),a(this,f,w).call(this),n(this,l,e),t(this,l).el=document.querySelector(e.el),t(this,l).target=document.querySelector(e.target),n(this,p,{content:"",contentHTML:""}),n(this,d,{}),a(this,g,y).call(this,t(this,l).emotMaps)}var o,c,v;return o=i,(c=[{key:"get",value:function(){return t(this,p)}}])&&e(o.prototype,c),v&&e(o,v),Object.defineProperty(o,"prototype",{writable:!1}),i}()}();
//# sourceMappingURL=emot.js.map
